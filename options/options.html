<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>SnapFlomo 设置</title>
  <link rel="stylesheet" href="options.css">
  <link rel="stylesheet" href="../styles/themes.css">
</head>
<body>
  <div class="container">
    <h1>SnapFlomo 设置</h1>
    
    <div class="section">
      <div class="notice">
        <span class="notice-icon">ℹ️</span>
        <span class="notice-text">此功能需要flomo会员，欢迎支持这款AI产品真诚重度使用的产品，获取专属记录API: 个人账号--》扩展中心 & API</span>
      </div>
    </div>

    <div class="section">
      <h2>Webhook 设置</h2>
      <div class="setting-box">
        <div class="input-group required-field">
          <label>Flomo Webhook URL:</label>
          <div class="input-wrapper">
            <input type="text" id="webhookUrl" placeholder="请输入你的 Flomo Webhook URL">
          </div>
        </div>
        <div class="api-links">
          <a href="https://v.flomoapp.com/mine?source=incoming_webhook" target="_blank" class="api-link">
            <span>获取 Webhook URL</span>
            <svg viewBox="0 0 24 24" width="14" height="14">
              <path fill="currentColor" d="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z" />
            </svg>
          </a>
        </div>
      </div>
    </div>

    <div class="section">
      <h2>标签设置</h2>
      <div class="setting-box">
        <div class="input-group">
          <label>默认标签:</label>
          <div class="input-wrapper">
            <input type="text" id="defaultTag" placeholder="#Chrome阅读笔记" value="#Chrome阅读笔记">
          </div>
        </div>
        
        <div class="input-group">
          <div class="toggle-wrapper">
            <label class="toggle-label">
              <span>启用网站名称标签</span>
              <div class="switch">
                <input type="checkbox" id="enableSiteTag" checked>
                <span class="slider"></span>
              </div>
            </label>
          </div>
          <div class="notice">
            <span class="notice-icon">ℹ️</span>
            <span class="notice-text">启用后将优先从页面标题解析网站名称(如：掘金、知乎)作为标签，若解析失败则使用默认标签</span>
          </div>
        </div>
      </div>
    </div>

    <div class="section">
      <h2>AI 设置</h2>
      <div class="ai-settings">
        <div class="ai-service-select">
          <label>选择 AI 服务：</label>
          <select id="aiService" class="select-styled">
            <option value="zhipu">智谱 AI</option>
            <option value="deepseek">Deepseek AI</option>
          </select>
        </div>
        <div class="api-key-input">
          <label>API Key:</label>
          <div class="input-wrapper">
            <input type="password" id="apiKey" placeholder="请输入 API Key">
            <button class="toggle-password" title="显示/隐藏">
              <svg viewBox="0 0 24 24" width="16" height="16">
                <path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" />
              </svg>
            </button>
          </div>
        </div>
      </div>
      <div class="api-links">
        <a href="https://open.bigmodel.cn/usercenter/apikeys" target="_blank" class="api-link">
          <span>获取智谱 AI Key</span>
          <svg viewBox="0 0 24 24" width="14" height="14">
            <path fill="currentColor" d="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z" />
          </svg>
        </a>
        <a href="https://platform.deepseek.com/" target="_blank" class="api-link">
          <span>获取 Deepseek Key</span>
          <svg viewBox="0 0 24 24" width="14" height="14">
            <path fill="currentColor" d="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z" />
          </svg>
        </a>
      </div>
    </div>

    <div class="section">
      <h2>快捷键设置</h2>
      <div class="setting-box">
        <div class="notice">
          <span class="notice-icon">ℹ️</span>
          <span class="notice-text">首次使用需要手动激活快捷键，否则快捷键无法使用</span>
        </div>
        
        <div class="shortcut-info">
          <div class="shortcut-row">
            <span class="platform-label">Mac:</span>
            <code class="shortcut-key">Command + Shift + F</code>
          </div>
          <div class="shortcut-row">
            <span class="platform-label">Windows:</span>
            <code class="shortcut-key">Alt + Shift + F</code>
          </div>
        </div>
        
        <div class="shortcut-actions">
          <button class="btn-secondary" id="viewShortcutBtn">
            <span>激活快捷键</span>
            <svg viewBox="0 0 24 24" width="14" height="14">
              <path fill="currentColor" d="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z" />
            </svg>
          </button>
        </div>
        
        <div class="shortcut-tips">
          <p class="tip">1. 点击上方按钮前往 Chrome 扩展快捷键设置页面</p>
          <p class="tip">2. 找到 "SnapFlomo" 并点击输入框</p>
          <p class="tip">3. 按下对应的快捷键组合进行设置</p>
        </div>
      </div>
    </div>

    <div class="section">
      <h2>主题设置</h2>
      <div class="setting-box">
        <div class="theme-selector">
          <label>选择主题:</label>
          <div class="theme-options">
            <div class="theme-card" data-theme="default">
              <div class="theme-preview default-theme">
                <span class="theme-icon">🎨</span>
              </div>
              <span class="theme-name">默认主题</span>
            </div>
            <div class="theme-card" data-theme="christmas">
              <div class="theme-preview christmas-theme">
                <span class="theme-icon">🎄</span>
              </div>
              <span class="theme-name">圣诞主题</span>
            </div>
            <div class="theme-card" data-theme="newyear">
              <div class="theme-preview newyear-theme">
                <span class="theme-icon">🎊</span>
              </div>
              <span class="theme-name">新年主题</span>
            </div>
            <div class="theme-card" data-theme="snake">
              <div class="theme-preview snake-theme">
                <span class="theme-icon">🐍</span>
              </div>
              <span class="theme-name">蛇年主题</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="stats-section">
      <h2>统计分析</h2>
      <div class="stats-info">
        <p>📊 统计分析功能可帮您了解:</p>
        <ul>
          <li>每月保存的内容数量和趋势</li>
          <li>不同来源网站的内容分布</li>
          <li>最近保存的内容记录</li>
        </ul>
        <p class="stats-note">
          ℹ️ 统计数据仅保存最近3个月,且只记录必要信息
          <span class="info-icon" id="dataStorageInfo" title="点击查看数据存储说明">ⓘ</span>
        </p>
      </div>
      <button id="viewStats" class="stats-btn">
        <span class="stats-btn-icon">📈</span>
        <span class="stats-btn-text">查看保存统计</span>
      </button>

      <!-- 弹出框 -->
      <div id="storageInfoModal" class="modal">
        <div class="modal-content">
          <span class="close-btn">&times;</span>
          <h3>数据存储说明</h3>
          <div class="storage-info-content">
            <section>
              <h4>✓ 以下情况数据不会丢失：</h4>
              <p>关闭浏览器、重启电脑、浏览器崩溃、正常更新扩展</p>
            </section>
            <section>
              <h4>⚠️ 以下情况数据可能丢失：</h4>
              <p>手动卸载扩展、清除浏览器数据、浏览器强制清除、重新安装扩展</p>
            </section>
            <div class="tip">💡 建议定期导出数据作为备份，以防数据丢失</div>
          </div>
        </div>
      </div>
    </div>

    <button id="saveSettings" class="btn-primary">保存设置</button>
    
    <div class="footer">
      <span>Power By</span>
      <a href="https://juejin.cn/user/2664871918047063" class="author-link">hresh</a>
    </div>
  </div>
  <script type="module" src="options.js"></script>
</body>
</html> 